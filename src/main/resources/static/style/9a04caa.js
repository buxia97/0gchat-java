(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{719:function(t,e,n){"use strict";n.r(e);n(47),n(49),n(39),n(48),n(15),n(79),n(32),n(80);var o=n(30),c=n(81);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var l={data:function(){return{menuShow:!1,chatList:[],chatStatus:1,type:0,options:[],value:1,systemMsg:"",configInfo:{banText:""},curChatInfo:{id:0,name:"",intro:"",pic:0},chatEditVisible:!1,chatAddVisible:!1,banList:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(c.b)({token:function(t){return t.token}})),created:function(){},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this,e=t.type;0==e&&t.getChatList(),1==e&&t.getConfigs(),2==e&&t.getBanList(),3==e&&t.getChatOptions()},setType:function(t){this.type=t,this.loadData()},setChatStatus:function(t){var e=this;e.chatStatus=t,e.chatList=[],e.getChatList()},getChatList:function(){var t=this,e={status:t.chatStatus},data={searchParams:JSON.stringify(t.$api.removeObjectEmptyKey(e)),limit:100};t.$axios.$post(t.$api.chatList(),this.qs.stringify(data),{progress:!1}).then((function(e){if(1==e.code){var n=e.data;n.length>0?t.chatList=n:t.chatList=[]}})).catch((function(e){console.log(e),t.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},editChat:function(data){this.curChatInfo=data,this.chatEditVisible=!0},save:function(){var t=this,e=t.curChatInfo,data={params:JSON.stringify(t.$api.removeObjectEmptyKey(e)),token:t.token},n=this.$loading({lock:!0,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.$axios.$post(t.$api.chatUpdate(),this.qs.stringify(data),{progress:!1}).then((function(e){n.close(),1==e.code?(t.chatEditVisible=!1,t.curChatInfo={id:0,name:"",intro:"",pic:0},t.$message({message:"操作成功！",type:"success"}),t.getChatList()):t.$message({message:e.msg,type:"error"})})).catch((function(e){n.close(),console.log(e),t.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},statusChat:function(t,e){var n=this,o=this;o.$confirm("确认要修改频道"+t.id+"的状态吗？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.status=e;var data={params:JSON.stringify(o.$api.removeObjectEmptyKey(t)),token:o.token},c=n.$loading({lock:!0,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});o.$axios.$post(o.$api.chatUpdate(),n.qs.stringify(data),{progress:!1}).then((function(t){c.close(),1==t.code?(o.$message({message:"操作成功！",type:"success"}),o.getChatList()):o.$message({message:t.msg,type:"error"})})).catch((function(t){c.close(),console.log(t),o.$message({message:"接口请求异常，请检查网络！",type:"error"})}))})).catch((function(){}))},deleteChat:function(t){var e=this,n=this;n.$confirm("确认要删除频道"+t.id+"吗？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var data={key:t.id,token:n.token},o=e.$loading({lock:!0,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});n.$axios.$post(n.$api.chatDelete(),e.qs.stringify(data),{progress:!1}).then((function(t){o.close(),1==t.code?(n.$message({message:"操作成功！",type:"success"}),n.getChatList()):n.$message({message:t.msg,type:"error"})})).catch((function(t){o.close(),console.log(t),n.$message({message:"接口请求异常，请检查网络！",type:"error"})}))})).catch((function(){}))},add:function(){var t=this,e=t.curChatInfo,data={params:JSON.stringify(t.$api.removeObjectEmptyKey(e)),token:t.token},n=this.$loading({lock:!0,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.$axios.$post(t.$api.chatAdd(),this.qs.stringify(data),{progress:!1}).then((function(e){n.close(),1==e.code?(t.chatAddVisible=!1,t.curChatInfo={id:0,name:"",intro:"",pic:0},t.$message({message:"操作成功！",type:"success"}),t.getChatList()):t.$message({message:e.msg,type:"error"})})).catch((function(e){n.close(),console.log(e),t.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfigs:function(){var t=this,data=(t.chatStatus,{token:t.token});t.$axios.$post(t.$api.getConfigs(),this.qs.stringify(data),{progress:!1}).then((function(e){1==e.code&&(t.configInfo=e.data)})).catch((function(e){console.log(e),t.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},saveConfig:function(){var t=this,e=t.configInfo,data={params:JSON.stringify(t.$api.removeObjectEmptyKey(e)),token:t.token},n=this.$loading({lock:!0,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.$axios.$post(t.$api.configsUpdate(),this.qs.stringify(data),{progress:!1}).then((function(e){n.close(),1==e.code?(t.$message({message:"操作成功！",type:"success"}),t.getConfigs()):t.$message({message:e.msg,type:"error"})})).catch((function(e){n.close(),console.log(e),t.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getBanList:function(){var t=this,data={limit:100,token:t.token};t.$axios.$post(t.$api.banList(),this.qs.stringify(data),{progress:!1}).then((function(e){if(1==e.code){var n=e.data;n.length>0?t.banList=n:t.banList=[]}})).catch((function(e){console.log(e),t.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},deleteBan:function(t){var e=this,n=this;n.$confirm("确认要解除封禁吗？","操作提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var data={key:t,token:n.token},o=e.$loading({lock:!0,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});n.$axios.$post(n.$api.banDelete(),e.qs.stringify(data),{progress:!1}).then((function(t){o.close(),1==t.code?(n.$message({message:"操作成功！",type:"success"}),n.getBanList()):n.$message({message:t.msg,type:"error"})})).catch((function(t){o.close(),console.log(t),n.$message({message:"接口请求异常，请检查网络！",type:"error"})}))})).catch((function(){}))},getChatOptions:function(){var t=this,data={searchParams:JSON.stringify(t.$api.removeObjectEmptyKey({status:1})),limit:100};t.$axios.$post(t.$api.chatList(),this.qs.stringify(data),{progress:!1}).then((function(e){if(1==e.code){var n=e.data,o=[];for(var i in n){var c={value:n[i].id,label:n[i].name};o.push(c)}t.options=o,console.log(JSON.stringify(o))}})).catch((function(e){console.log(e),t.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},sendSystemMsg:function(){var t=this;if(""==t.systemMsg)return!1;var data={text:t.systemMsg,chatid:t.value,token:t.token},e=this.$loading({lock:!0,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});t.$axios.$post(t.$api.sendSystemMsg(),this.qs.stringify(data),{progress:!1}).then((function(n){e.close(),1==n.code?(t.$message({message:"发送成功！",type:"success"}),t.getBanList()):t.$message({message:n.msg,type:"error"})})).catch((function(n){e.close(),console.log(n),t.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},m=l,f=n(57),component=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"system"},[e("div",{staticClass:"system-menu-bg",class:t.menuShow?"show":"",on:{click:function(e){t.menuShow=!1}}}),t._v(" "),e("div",{staticClass:"system-menu",class:t.menuShow?"show":""},[e("div",{staticClass:"system-title"},[t._v("\n      管理中心\n    ")]),t._v(" "),e("div",{staticClass:"system-menu-box",class:0==t.type?"cur":"",on:{click:function(e){return t.setType(0)}}},[t._m(0)]),t._v(" "),e("div",{staticClass:"system-menu-box",class:1==t.type?"cur":"",on:{click:function(e){return t.setType(1)}}},[t._m(1)]),t._v(" "),e("div",{staticClass:"system-menu-box",class:2==t.type?"cur":"",on:{click:function(e){return t.setType(2)}}},[t._m(2)]),t._v(" "),e("div",{staticClass:"system-menu-box",class:3==t.type?"cur":"",on:{click:function(e){return t.setType(3)}}},[t._m(3)])]),t._v(" "),e("div",{staticClass:"system-concent"},[e("div",{staticClass:"system-wap-header"},[e("i",{staticClass:"el-icon-s-unfold",on:{click:function(e){t.menuShow=!0}}}),t._v("管理中心\n    ")]),t._v(" "),0==t.type?[e("div",{staticClass:"system-chatList"},[e("div",{staticClass:"sf-chatList-type"},[e("div",{staticClass:"sf-chatList-type-box",class:1==t.chatStatus?"cur":"",on:{click:function(e){return t.setChatStatus(1)}}},[e("span",[t._v("进行中")])]),t._v(" "),e("div",{staticClass:"sf-chatList-type-box",class:0==t.chatStatus?"cur":"",on:{click:function(e){return t.setChatStatus(0)}}},[e("span",[t._v("已关闭")])])]),t._v(" "),e("div",{staticClass:"chatAdd",on:{click:function(e){t.chatAddVisible=!0}}},[e("i",{staticClass:"el-icon-plus"})]),t._v(" "),e("div",{staticClass:"chatList"},[0==t.chatList.length?e("div",{staticClass:"data-no"},[e("i",{staticClass:"el-icon-chat-dot-square"}),t._v(" "),e("p",[t._v("暂无可用频道")])]):t._e(),t._v(" "),t._l(t.chatList,(function(n,o){return e("div",{staticClass:"chatList-box"},[e("div",{staticClass:"chatList-box-main"},[e("div",{staticClass:"chatList-box-avatar"},[e("el-image",{attrs:{src:"/chatAvatar/"+n.pic+".jpg"}})],1),t._v(" "),e("div",{staticClass:"chatList-box-info"},[e("div",{staticClass:"chatList-box-name"},[t._v("\n                   "+t._s(n.name)+"\n                ")]),t._v(" "),e("div",{staticClass:"chatList-box-value"},[e("span",{staticClass:"num"},[t._v(t._s(n.totalMsg)+"条消息")]),t._v(" "),e("span",{on:{click:function(e){return t.editChat(n)}}},[t._v("编辑")]),t._v(" "),1==n.status?[e("span",{on:{click:function(e){return t.statusChat(n,0)}}},[t._v("停止")])]:[e("span",{on:{click:function(e){return t.statusChat(n,1)}}},[t._v("开启")])],t._v(" "),e("span",{staticStyle:{color:"#F56C6C"},on:{click:function(e){return t.deleteChat(n)}}},[t._v("删除")])],2)])])])}))],2)])]:t._e(),t._v(" "),1==t.type?[null!=t.configInfo?e("div",{staticClass:"system-form"},[e("el-form",{ref:"form",attrs:{"label-position":"top"}},[e("el-form-item",{attrs:{label:"违禁词(根据英文逗号分割)"}},[e("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入违禁词"},model:{value:t.configInfo.banText,callback:function(e){t.$set(t.configInfo,"banText",e)},expression:"configInfo.banText"}})],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveConfig()}}},[t._v("保存设置")])],1)],1)],1):t._e()]:t._e(),t._v(" "),2==t.type?[e("div",{staticClass:"system-ban"},[0==t.banList.length?e("div",{staticClass:"data-no"},[e("i",{staticClass:"el-icon-chat-dot-square"}),t._v(" "),e("p",[t._v("暂无封禁IP")])]):t._e(),t._v(" "),t._l(t.banList,(function(n,o){return e("div",{staticClass:"system-ban-box"},[e("div",{staticClass:"system-ban-main"},[e("div",{staticClass:"system-ban-ip"},[t._v("\n              "+t._s(n.ip)+"\n            ")]),t._v(" "),e("div",{staticClass:"system-ban-btn"},[e("span",{on:{click:function(e){return t.deleteBan(n.id)}}},[t._v("解除封禁")])])])])}))],2)]:t._e(),t._v(" "),3==t.type?[e("div",{staticClass:"system-send"},[e("el-form",{ref:"form",attrs:{"label-position":"top"}},[e("el-form-item",{attrs:{label:"选择频道"}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),e("el-form-item",{attrs:{label:"消息内容"}},[e("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入消息内容"},model:{value:t.systemMsg,callback:function(e){t.systemMsg=e},expression:"systemMsg"}})],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sendSystemMsg()}}},[t._v("立即发送")])],1)],1)],1)]:t._e()],2),t._v(" "),e("el-dialog",{attrs:{title:"编辑聊天频道",visible:t.chatEditVisible,modal:!1,width:"330px"},on:{"update:visible":function(e){t.chatEditVisible=e}}},[e("div",{staticClass:"dialog-form"},[e("el-form",{ref:"form",attrs:{"label-position":"top"}},[e("el-form-item",{attrs:{label:"频道名称"}},[e("el-input",{attrs:{type:"text",placeholder:"请输入频道名称"},model:{value:t.curChatInfo.name,callback:function(e){t.$set(t.curChatInfo,"name",e)},expression:"curChatInfo.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"频道介绍"}},[e("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入频道介绍"},model:{value:t.curChatInfo.intro,callback:function(e){t.$set(t.curChatInfo,"intro",e)},expression:"curChatInfo.intro"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"频道头像"}},[e("div",{staticClass:"chat-form-pic"},t._l(6,(function(n){return e("div",{staticClass:"chat-pic-box",class:t.curChatInfo.pic==n?"active":"",on:{click:function(e){t.curChatInfo.pic=n}}},[e("el-image",{attrs:{src:"/chatAvatar/"+n+".jpg"}})],1)})),0)])],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.save()}}},[t._v("保存信息")])],1)]),t._v(" "),e("el-dialog",{attrs:{title:"编辑聊天频道",visible:t.chatAddVisible,modal:!1,width:"330px"},on:{"update:visible":function(e){t.chatAddVisible=e}}},[e("div",{staticClass:"dialog-form"},[e("el-form",{ref:"form",attrs:{"label-position":"top"}},[e("el-form-item",{attrs:{label:"频道名称"}},[e("el-input",{attrs:{type:"text",placeholder:"请输入频道名称"},model:{value:t.curChatInfo.name,callback:function(e){t.$set(t.curChatInfo,"name",e)},expression:"curChatInfo.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"频道介绍"}},[e("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入频道介绍"},model:{value:t.curChatInfo.intro,callback:function(e){t.$set(t.curChatInfo,"intro",e)},expression:"curChatInfo.intro"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"频道头像"}},[e("div",{staticClass:"chat-form-pic"},t._l(6,(function(n){return e("div",{staticClass:"chat-pic-box",class:t.curChatInfo.pic==n?"active":"",on:{click:function(e){t.curChatInfo.pic=n}}},[e("el-image",{attrs:{src:"/chatAvatar/"+n+".jpg"}})],1)})),0)])],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.add()}}},[t._v("确认增加")])],1)])],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"system-menu-main"},[t("i",{staticClass:"el-icon-s-comment"}),this._v("频道管理\n      ")])},function(){var t=this._self._c;return t("div",{staticClass:"system-menu-main"},[t("i",{staticClass:"el-icon-s-release"}),this._v("违禁词设置\n      ")])},function(){var t=this._self._c;return t("div",{staticClass:"system-menu-main"},[t("i",{staticClass:"el-icon-warning"}),this._v("黑名单\n      ")])},function(){var t=this._self._c;return t("div",{staticClass:"system-menu-main"},[t("i",{staticClass:"el-icon-message-solid"}),this._v("发送系统通知\n      ")])}],!1,null,null,null);e.default=component.exports}}]);